{"version":3,"sources":["Persons.js","PersonForm.js","Filter.js","Notification.js","services/persons.js","App.js","index.js"],"names":["Persons","persons","handleDelete","map","person","key","name","number","onClick","id","PersonForm","onSubmitAction","onChangeName","onChangeNumber","onSubmit","value","onChange","type","Filter","filter","onChangeAction","Notification","message","className","getAll","axios","get","then","response","data","create","newObject","a","request","post","update","put","deleteItem","window","confirm","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","showAll","setShowAll","newFilter","setNewFilter","notification","setNotification","useEffect","personsService","personsData","personsToShow","includes","toLowerCase","evt","target","preventDefault","newPerson","some","item","existingPerson","find","concat","setTimeout","catch","error","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1b89a11f.chunk.js","sourcesContent":["import React from 'react'\n\nconst Persons = ({ persons, handleDelete }) => {\n  return (\n    persons.map(\n      (person) =>\n        <p key={person.name}>{person.name} {person.number} <button onClick={() => handleDelete(person.id, person.name)}>delete</button></p>\n    )\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst PersonForm = ({ onSubmitAction, name, onChangeName, number, onChangeNumber }) => {\n  return (\n    <form onSubmit={onSubmitAction}>\n      <div>\n        name: <input value={name}\n          onChange={onChangeName} />\n      </div>\n      <div>number: <input value={number}\n        onChange={onChangeNumber} /></div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ filter, onChangeAction }) => {\n  return (\n    <div>filter shown with <input value={filter}\n      onChange={onChangeAction} /></div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n    if (message === '') {\n      return null\n    }\n    if (type === 'error') {\n        return (\n          <div className={`message error`}>\n          {message}\n        </div>\n        )\n      }\n      else {\n  \n    return (\n      <div className=\"message\">\n        {message}\n      </div>\n    )\n      }\n}\n\nexport default Notification","import axios from 'axios';\nconst baseUrl = '/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = async (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  const response = await request;\n  return response.data;\n};\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst deleteItem = (id, name, newObject) => {\n  const confirmDeleting = window.confirm(\n    `Do you really want to delete ${name} from phonebook?`,\n  );\n  if (confirmDeleting) {\n    const request = axios.delete(`${baseUrl}/${id}`, newObject);\n    return request.then((response) => response);\n  }\n};\n\nexport default {getAll, create, update, deleteItem};\n","import React, {useState, useEffect} from 'react';\nimport Persons from './Persons';\nimport PersonForm from './PersonForm';\nimport Filter from './Filter';\nimport Notification from './Notification';\nimport personsService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [showAll, setShowAll] = useState(true);\n  const [newFilter, setNewFilter] = useState('');\n  const [notification, setNotification] = useState({message: '', type: ''});\n\n  useEffect(() => {\n    personsService.getAll().then((personsData) => {\n      setPersons(personsData);\n    });\n  }, []);\n  const handleNameChange = (evt) => {\n    setNewName(evt.target.value);\n  };\n  const handleNumberChange = (evt) => {\n    setNewNumber(evt.target.value);\n  };\n  const setFilterValue = (evt) => {\n    setShowAll(false);\n    setNewFilter(evt.target.value);\n  };\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(\n        (person) =>\n          person.name.includes(newFilter) ||\n          person.name.toLowerCase().includes(newFilter.toLowerCase()),\n      );\n\n  const isDuplicate = () => persons.some((item) => item.name === newName);\n  const addNewPerson = (evt) => {\n    evt.preventDefault();\n    if (!newName || !newNumber) return;\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    if (isDuplicate()) {\n      if (\n        window.confirm(\n          `This person is already added to phonebook. Replace the old number with a new one?`,\n        )\n      ) {\n        const existingPerson = persons.find(\n          (person) => person.name === newPerson.name,\n        );\n        personsService\n          .update(existingPerson.id, newPerson)\n          .then((data) =>\n            setPersons(\n              persons.map(\n                (person) => (person.id !== data.id ? person : data),\n                false,\n              ),\n            ),\n          );\n        setNotification({\n          ...notification,\n          message: `Number for ${existingPerson.name} is changed successfully`,\n        });\n      }\n    } else {\n      personsService.create(newPerson).then((response) => {\n        setPersons(persons.concat(response));\n      });\n      setNotification({\n        ...notification,\n        message: `${newPerson.name} is added to phonebook`,\n      });\n    }\n    setTimeout(() => {\n      setNotification({...notification, message: '', type: ''});\n    }, 5000);\n    setNewName('');\n    setNewNumber('');\n  };\n  const handleDelete = (id, name) => {\n    //if(!personsService.deleteItem(id, name)) return\n    personsService\n      .deleteItem(id, name)\n      .then(() => {\n        setPersons(persons.filter((person) => person.id !== id));\n      })\n      .catch((error) => {\n        setNotification({\n          ...notification,\n          message: `${name} has already been deleted`,\n          type: 'error',\n        });\n        setPersons(persons.filter((person) => person.name !== name));\n        setTimeout(() => {\n          setNotification({...notification, message: '', type: ''});\n        }, 5000);\n      });\n  };\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Filter filter={newFilter} onChangeAction={setFilterValue} />\n      <h3>Add a new</h3>\n      <PersonForm\n        onSubmitAction={addNewPerson}\n        name={newName}\n        onChangeName={handleNameChange}\n        number={newNumber}\n        onChangeNumber={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow} handleDelete={handleDelete} />\n      <Notification message={notification.message} type={notification.type} />\n    </>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}